---
title: "Oumayma's Questions"
output: html_document
date: "2025-11-25"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## 2. Does time of day relate to acceptance? 

Variables (Description): time (categorical: 5 levels — morning, afternoon, evening, late night, unknown); acceptance (binary)	

Data Type: Multi-level categorical on binary outcome	

Planned Method of Analysis: One-way ANOVA on mean acceptance rates by time of day	

Hypotheses (H₀ / Hₐ): 
  - H₀: Mean acceptance is the same across all times of day.
  - Hₐ: At least one time-of-day group has a different mean acceptance.

```{r}
# Load data 
data <- read.csv("in-vehicle-coupon-rec.csv")
head(data)
```

```{r}
# Fix time order: 7AM → 10AM → 2PM → 6PM → 10PM
data$time <- factor(data$time, levels = c("7AM", "10AM", "2PM", "6PM", "10PM"), ordered = TRUE)

# Run one-way ANOVA to test if mean acceptance differs by time of day
summary(aov(Y ~ time, data = data))

# Tukey HSD post-hoc test - shows exactly WHICH times differ from each other
TukeyHSD(aov(Y ~ time, data = data))
# Plot the Tukey results – visual confidence intervals of all pairwise differences
plot(TukeyHSD(aov(Y ~ time, data = data))) # Any interval that does NOT cross zero = statistically significant difference

# Calculate acceptance rate (%) and sample size for each time 
temp   <- table(data$time, data$Y)           # crosstab: rows = time, columns = 0/1
rates  <- prop.table(temp, margin = 1) # row percentages
rates  <- rates[, "1"]                 # keep only the "accepted" column
n_obs  <- margin.table(temp, margin = 1)

# Combine results into a nice data frame and display
data.frame(time = names(rates),
           acceptance_rate = round(rates, 3),
           n = as.vector(n_obs),
           row.names = NULL)
```

The one-way ANOVA revealed a highly significant association between time of day and coupon acceptance (F(4, 12679) = 44.37, p < 2e-16). Tukey’s post-hoc comparisons showed that acceptance was highest at 2 PM (66.2%), which was significantly higher than at 7 AM, 6 PM, and 10 PM, and marginally higher than at 10 AM (p = 0.002). Acceptance at 10 AM and 6 PM was also significantly higher than at 7 AM and 10 PM, whereas 7 AM and 10 PM did not differ from each other. Overall, drivers were markedly more likely to accept coupons during midday and early-evening hours than in the early morning or late night.



## 4. Is acceptance different by coupon type?	

Variables (Description): coupon (categorical: 4 levels — bar, coffee house, <$20 restaurant, $20–$50 restaurant); acceptance (binary)

Data Type: Categorical predictor with four levels	One-way ANOVA on acceptance means by coupon category	

Hypotheses (H₀ / Hₐ): 
  - H₀: Mean acceptance is equal across all coupon types.
  - Hₐ: At least one coupon type has a different mean acceptance.

```{r}
# Make sure 'coupon' is treated as a categorical variable
data$coupon <- factor(data$coupon)

# One-way ANOVA to test if acceptance differs by coupon type
summary(aov(Y ~ coupon, data = data))

# Tukey HSD post-hoc test – shows exactly WHICH coupon types differ
TukeyHSD(aov(Y ~ coupon, data = data))

# Plot Tukey results – visual of all pairwise differences
plot(TukeyHSD(aov(Y ~ coupon, data = data))) # Intervals not crossing zero = significant difference at p < 0.05

# Calculate acceptance rate and sample size for each coupon type
temp_table   <- table(data$coupon, data$Y)                    # Crosstab: coupon vs accept/reject
accept_rate  <- prop.table(temp_table, margin = 1)[, "1"]   # Acceptance % per coupon
n_per_coupon <- margin.table(temp_table, margin = 1)        # Number of offers per type

# Create clean results table and sort from highest to lowest acceptance
result_coupon <- data.frame(
  Coupon_Type     = names(accept_rate),
  Acceptance_Rate = round(as.numeric(accept_rate), 3),
  N               = as.vector(n_per_coupon),
  row.names       = NULL
)

# Sort by acceptance rate (highest first)
result_coupon[order(-result_coupon$Acceptance_Rate), ]
```


The one-way ANOVA revealed a highly significant effect of coupon type on acceptance (F(4, 12679) = 234.5, p < 2e-16). Tukey’s HSD post-hoc tests showed that acceptance rates for Carry out & Take away (73.5%, n = 2,393) and Restaurant(<20) (70.7%, n = 2,786) are statistically indistinguishable from each other (p is about 0.208) yet both are dramatically and significantly higher than all remaining coupon types (all p < 0.001). Coffee House coupons achieve moderate acceptance (49.9%, n = 3,996), which is still significantly better than both Restaurant(20–50) (44.1%, n = 1,492) and Bar (41.0%, n = 2,017) coupons (p < 0.001), while the latter two do not differ significantly from each other (p = 0.318). In practical terms, customers are far more likely to accept coupons that offer low-cost, immediately usable food—carry-out/take-away and inexpensive restaurant deals—than coupons for coffee houses, mid-range restaurants, or bars. For maximum redemption rates, coupons should be targeted at carry-out/take-away transactions and small restaurants (<20 seats), whereas distribution at bars or medium-sized restaurants (20–50 seats) yields the poorest return. 













